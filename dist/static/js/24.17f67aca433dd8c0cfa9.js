webpackJsonp([24],{"1ATk":function(e,t){},"4T+3":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={data:function(){return{activeName:"first",value:null,issueListData:[],search:{number:"",password:"",teacher:"",count:0},rules:{number:[{required:!0,message:"请输入学生学号",trigger:"blur"},{min:9,max:10,message:"请输入完整学号",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]}}},created:function(){this.handleIssue()},methods:{handleSearch:function(e){var t=this;this.$refs[e].validate(function(e){if(e){var a=t.search.number,s=t.search.password;t.$http.post("/api/user/stuList",{number:a,begin:0,end:500}).then(function(e){e.data[0].password!=s?t.$message({message:"密码错误，请重新输入！",type:"warning"}):e.data.length>1?t.$message({message:"请输入完整的学号",type:"warning"}):0==e.data.length?t.$message({message:"没有该生信息，请联系辅导员",type:"warning"}):t.search.teacher=e.data[0].teacher})}})},handleIssue:function(){var e=this;this.$http.post("/api/user/issueList_tc").then(function(t){e.issueListData=t.data})},handleComment:function(e,t){var a=this,s=t.value,r=0,n=0,l=0,c=0;1==s?r=1:2==s?n=1:3==s?l=1:c=1;var o=t.id,i=this.search.teacher;i?this.$http.post("/api/user/tcCheck",{issueId:o,tcName:i}).then(function(e){console.log(e),0!=e.data.length?a.$http.post("/api/user/tcMarkDetailsUpdate",{tcName:i,issueId:o,satisfied:c,good:l,common:n,worse:r}).then(function(e){a.search.count=a.search.count+1,a.search.count>=8&&(a.search.count=8)}):a.$http.post("/api/user/tcMarkDetailsAdd",{tcName:i,issueId:o,satisfied:c,good:l,common:n,worse:r}).then(function(e){a.search.count=a.search.count+1,a.search.count>=8&&(a.search.count=8)})}):this.$message({message:"请先输入学号获取评价教师",type:"info"})},handleClick:function(){var e=this;8==this.search.count?this.$confirm("您已完成所有的评价!","title",{cancelButtonText:"取消",type:"warning"}).then(function(){e.$router.push("/frontHome")}).catch(function(){}):this.$message({message:"请先完成所有评价!",type:"info"})}}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-tabs",{staticClass:"tabs",attrs:{"tab-position":"left"},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"教师评价",name:"first"}},[a("div",{staticClass:"search"},[a("el-form",{ref:"search",attrs:{model:e.search,inline:"",rules:e.rules}},[a("el-form-item",{attrs:{label:"学号",prop:"number"}},[a("el-input",{attrs:{placeholder:"请输入学号"},model:{value:e.search.number,callback:function(t){e.$set(e.search,"number",t)},expression:"search.number"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{attrs:{type:"password",placeholder:"请输入密码"},model:{value:e.search.password,callback:function(t){e.$set(e.search,"password",t)},expression:"search.password"}})],1),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.handleSearch("search")}}},[e._v("查找")]),e._v(" "),a("el-form-item",{staticStyle:{"margin-left":"100px"},attrs:{label:"评价教师:"}},[a("h3",[e._v(e._s(e.search.teacher))])]),e._v(" "),a("el-form-item",{staticStyle:{"margin-left":"100px"},attrs:{label:"评价问题数"}},[a("h3",[e._v(e._s(e.search.count+"/8"))])])],1)],1),e._v(" "),a("el-table",{attrs:{data:e.issueListData}},[a("el-table-column",{attrs:{label:"序号",prop:"id",width:"50px",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"问题",prop:"issue",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"评价",prop:"comment",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-rate",{attrs:{"show-text":"",max:4},on:{change:function(a){e.handleComment(t.$index,t.row)}},model:{value:t.row.value,callback:function(a){e.$set(t.row,"value",a)},expression:"scope.row.value"}})]}}])})],1),e._v(" "),a("div",{staticClass:"btn"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.handleClick()}}},[e._v("评价完成")]),e._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:function(t){e.handleClick()}}},[e._v("退出")])],1)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"教官评价",name:"second"}},[a("div",{staticClass:"search"},[a("el-form",{ref:"search",attrs:{model:e.search,inline:"",rules:e.rules}},[a("el-form-item",{attrs:{label:"学号",prop:"number"}},[a("el-input",{attrs:{placeholder:"请输入学号"},model:{value:e.search.number,callback:function(t){e.$set(e.search,"number",t)},expression:"search.number"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{attrs:{type:"password",placeholder:"请输入密码"},model:{value:e.search.password,callback:function(t){e.$set(e.search,"password",t)},expression:"search.password"}})],1),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.handleSearch("search")}}},[e._v("查找")]),e._v(" "),a("el-form-item",{staticStyle:{"margin-left":"100px"},attrs:{label:"评价教官:"}},[a("h3",[e._v(e._s(e.search.teacher))])]),e._v(" "),a("el-form-item",{staticStyle:{"margin-left":"100px"},attrs:{label:"评价问题数"}},[a("h3",[e._v(e._s(e.search.count+"/8"))])])],1)],1),e._v(" "),a("el-table",{attrs:{data:e.issueListData}},[a("el-table-column",{attrs:{label:"序号",prop:"id",width:"50px",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"问题",prop:"issue",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"评价",prop:"comment",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-rate",{attrs:{"show-text":"",max:4},on:{change:function(a){e.handleComment(t.$index,t.row)}},model:{value:t.row.value,callback:function(a){e.$set(t.row,"value",a)},expression:"scope.row.value"}})]}}])})],1),e._v(" "),a("div",{staticClass:"btn"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.handleClick()}}},[e._v("评价完成")]),e._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:function(t){e.handleClick()}}},[e._v("退出")])],1)],1)],1)},staticRenderFns:[]};var n=a("VU/8")(s,r,!1,function(e){a("1ATk")},null,null);t.default=n.exports}});
//# sourceMappingURL=24.17f67aca433dd8c0cfa9.js.map
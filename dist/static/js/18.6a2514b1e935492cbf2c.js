webpackJsonp([18],{"3GYv":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});a("zL8q");var l,n=(l=0,function(t,e){clearTimeout(l),l=setTimeout(t,e)}),i={inject:["reload"],name:"Tcomment",data:function(){return{year:"",tcMarkData:[],markDetails:[],issueListData:[],count:1,page_size:6,currentPage:1,searchValue:"",dialogTableVisible:!1}},created:function(){this.getYear(),this.getMarkList()},watch:{searchValue:function(){var t=this;n(function(){t.getMarkList()},300)}},methods:{getYear:function(){var t=(new Date).getFullYear();this.year=t},getMarkList:function(){var t=this,e=this.searchValue;this.$http.post("/api/user/tcMarkList",{tcNumber:e,begin:0,end:5},{}).then(function(a){a?(t.tcMarkData=a.data,t.$http.post("/api/user/tcMarkCount",{tcNumber:e}).then(function(e){t.count=e.data,console.log(e.data)})):t.$confirm("暂未有评价信息，请军训结束后再查看","信息为空",{confirmButtonText:"返回主页",cancelButtonText:"好，我明白了",type:"warning"}).then(function(){t.$router.push("/index")})})},handleCurrentChange:function(t){var e=this,a=this.$refs.search.value;this.$http.post("/api/user/tcMarkList",{tcnumber:a,begin:5*t-5,end:5*t},{}).then(function(t){e.tcMarkData=t.data})},handleDetails:function(t,e){var a=this;this.$http.post("/api/user/issueAnswer_tc",{tcName:e.tcName}).then(function(t){""!=t.data?(a.markDetails=t.data,a.dialogTableVisible=!0,a.$http.post("/api/user/issueList_tc").then(function(t){a.issueListData=t.data})):a.$message({message:"暂未有评价，请军训结束后再查看",type:"danger"}),a.markDetails=t.data})},handleDel:function(t,e){var a=this;this.$confirm("是否删除"+e.tcName+"的评价信息？","删除提醒",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.$http.post("/api/user/tcMarkDel",{tcNumber:e.tcNumber}).then(function(t){t.status?(a.$message({message:"删除辅导员"+e.tcNumber+"成功",type:"success"}),a.reload()):a.$message({message:"删除辅导员"+e.tcNumber+"失败，请联系维护人员！",type:"warning"})})}).catch(function(){})}}},s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"block"},[a("h1",{staticClass:"title"},[t._v(t._s(t.year)+"年带训辅导员满意度汇总表")]),t._v(" "),a("el-header",{staticClass:"mark_stration"},[a("el-form",{attrs:{inline:""}},[a("ElFormItem",{attrs:{label:"输入辅导员工号："}},[a("el-input",{ref:"search",attrs:{placeholder:"输入辅导员工号","suffix-icon":"el-icon-search"},model:{value:t.searchValue,callback:function(e){t.searchValue="string"==typeof e?e.trim():e},expression:"searchValue"}})],1)],1)],1),t._v(" "),a("el-container",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tcMarkData}},[a("el-table-column",{attrs:{prop:"tcNumber",label:"工号",width:"120",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"tcName",label:"辅导员",align:"center",width:"150"}}),t._v(" "),a("el-table-column",{attrs:{prop:"clName",label:"所带班级",align:"center",width:"150"}}),t._v(" "),a("el-table-column",{attrs:{label:"满意度汇总（以百分比形式）",align:"center"}},[a("el-table-column",{attrs:{prop:"satisfied",label:"十分满意",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"good",label:"一般满意",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"common",label:"一般",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"worse",label:"不满意",align:"center"}})],1),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:"150px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",round:""},on:{click:function(a){t.handleDetails(e.$index,e.row)}}},[t._v("详细")]),t._v(" "),a("el-button",{attrs:{size:"mini",round:"",type:"danger"},on:{click:function(a){t.handleDel(e.$index,e.row)}}},[t._v("删除")])]}}])})],1)],1),t._v(" "),a("div",{staticClass:"page"},[a("el-pagination",{attrs:{"hide-on-single-page":!0,"current-page":t.currentPage,layout:"total, prev, pager, next, jumper",total:t.count,"page-size":t.page_size},on:{"current-change":t.handleCurrentChange}})],1),t._v(" "),a("el-dialog",{staticClass:"dialog",attrs:{title:"评价详情",visible:t.dialogTableVisible,center:"","show-close":"","lock-scroll":""},on:{"update:visible":function(e){t.dialogTableVisible=e}}},[a("div",{staticClass:"tableBox"},[a("el-table",{staticClass:"dialogTable1",staticStyle:{width:"40%"},attrs:{data:t.issueListData}},[a("el-table-column",{attrs:{label:"问卷内容",align:"center"}},[a("el-table-column",{attrs:{prop:"id",label:"序号",width:"50",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"issue",label:"评价项",align:"center"}})],1)],1),t._v(" "),a("el-table",{staticClass:"dialogTable2",staticStyle:{width:"55%"},attrs:{data:t.markDetails}},[a("el-table-column",{attrs:{label:"满意度汇总（以百分比形式）",align:"center"}},[a("el-table-column",{attrs:{prop:"satisfiedMark",label:"十分满意",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"goodMark",label:"一般满意",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"commonMark",label:"一般",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"worseMark",label:"不满意",align:"center"}})],1)],1)],1),t._v(" "),a("el-button",{staticClass:"backBtn",attrs:{type:"danger"},on:{click:function(e){t.dialogTableVisible=!1}}},[t._v("返回")])],1)],1)},staticRenderFns:[]};var r=a("VU/8")(i,s,!1,function(t){a("lkQA")},null,null);e.default=r.exports},lkQA:function(t,e){}});
//# sourceMappingURL=18.6a2514b1e935492cbf2c.js.map
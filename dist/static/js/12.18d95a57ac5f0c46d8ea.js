webpackJsonp([12],{nn54:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});a("zL8q");var l,o=a("t4zo"),r=a.n(o),s=a("uXZL"),n=a.n(s),i=(l=0,function(e,t){clearTimeout(l),l=setTimeout(e,t)}),m={inject:["reload"],data:function(){return{teaData:[],selectedOptions:[],dialogTableVisible:!1,dialogFormVisible:!1,dialogFormVisibleAdd:!1,searchValue:"",form:{number:"",name:"",college:"",major:"",class:"",phone:"",teacher:"",search_number:""},count:"",page_size:6,currentPage:1}},created:function(){this.getList(),this.allList()},watch:{searchValue:function(){var e=this;i(function(){e.getList()},300)}},methods:{allList:function(){var e=this;this.$http.post("/api/user/allTeaList").then(function(t){e.allListData=t.data})},outExe:function(){var e=this;this.$confirm("是否导出辅导员信息表?","提示",{confirmButtonText:"确定导出",cancelButtonText:"取消",type:"warning"}).then(function(){e.exportExcel()}).catch(function(){})},exportExcel:function(){this.pagesize="30",this.currentPage="1",this.$nextTick(function(){var e=n.a.utils.table_to_book(document.querySelector("#listTable")),t=n.a.write(e,{bookType:"xlsx",bookSST:!0,type:"array"});try{r.a.saveAs(new Blob([t],{type:"application/octet-stream"}),"辅导员信息表.xlsx")}catch(e){"undefined"!=typeof console&&console.log(e,t)}return this.pagesize="10",t})},getList:function(){var e=this,t=this.searchValue;this.$http.post("/api/user/teaList",{number:t,begin:0,end:6},{}).then(function(a){e.teaData=a.data,e.$http.post("/api/user/teaCount",{number:t}).then(function(t){e.count=t.data})})},handleChange:function(e,t){this.form.number=t.number,this.form.name=t.name,this.form.college=t.college,this.form.major=t.major,this.form.class=t.class,this.form.phone=t.phone,this.form.master=t.master},InfoUpdate:function(){var e=this,t=this.$refs.number.value,a=this.$refs.name.value,l=this.$refs.college.value,o=this.$refs.major.value,r=this.$refs.class.value,s=this.$refs.phone.value,n=this.$refs.master.value;this.$http.post("/api/user/teaUpdate",{number:t,name:a,college:l,major:o,class:r,phone:s,master:n},{}).then(function(t){console.log(t),t?(e.$message({message:"修改成功",type:"info"}),e.reload()):e.$message({message:"修改失败",type:"warning"})})},InfoAdd:function(){var e=this,t=this.$refs.numberAdd.value,a=this.$refs.nameAdd.value,l=this.$refs.collegeAdd.value,o=this.$refs.majorAdd.value,r=this.$refs.classAdd.value,s=this.$refs.phoneAdd.value,n=this.$refs.masterAdd.value;this.$http.post("/api/user/teaAdd",{number:t,name:a,college:l,major:o,class:r,phone:s,master:n}).then(function(t){t.status?(e.$message({message:"增加成功",type:"success"}),e.reload()):e.$message({message:"增加失败",type:"warning"})})},handleDelete:function(e,t){var a=this;this.$confirm("删除将不可恢复，是否确定删除工号"+t.number+"的所有信息？","删除提醒",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.$http.post("/api/user/teaDel",{number:t.number}).then(function(e){e.status?(a.$message({message:"删除工号"+t.number+"成功",type:"success"}),a.reload()):a.$message({message:"删除"+t.name+"信息失败",type:"warning"})})}).catch(function(){})},handleCurrentChange:function(e){var t=this,a=this.$refs.search.value;this.$http.post("/api/user/stuList",{number:a,begin:6*e-6,end:6*e-1},{}).then(function(e){t.stuData=e.data}),console.log("当前页: "+e)}}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"block"},[a("el-header",{staticClass:"stu_stration"},[a("el-form",{attrs:{model:e.form,inline:""}},[a("ElFormItem",{attrs:{label:"输入教师学号："}},[a("el-input",{ref:"search",attrs:{placeholder:"输入教师学号","suffix-icon":"el-icon-search"},model:{value:e.searchValue,callback:function(t){e.searchValue="string"==typeof t?t.trim():t},expression:"searchValue"}})],1),e._v(" "),a("el-button",{staticClass:"stuAdd",attrs:{type:"info",icon:"el-icon-circle-plus",round:"",plain:""},on:{click:function(t){e.dialogFormVisibleAdd=!0}}},[e._v("增加信息")]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"480px"},attrs:{icon:"el-icon-download",round:"",plain:"",type:"success"},on:{click:function(t){e.outExe()}}},[e._v("导出")])],1)],1),e._v(" "),a("el-table",{staticClass:"listTable",staticStyle:{width:"100%"},attrs:{data:e.teaData}},[a("el-table-column",{attrs:{prop:"number",label:"工号",align:"center",width:"100px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"姓名",align:"center",width:"100px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"college",label:"所在学院",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"major",label:"所带专业",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"class",label:"所带班级",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"phone",label:"联系方式",align:"center",width:"110px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"master",label:"教官",align:"center",width:"80px"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:"150px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",round:""},on:{click:function(a){e.dialogFormVisible=!0,e.handleChange(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger",round:""},on:{click:function(a){e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("div",{staticClass:"page"},[a("el-pagination",{attrs:{"hide-on-single-page":!0,"current-page":e.currentPage,layout:"total, prev, pager, next, jumper",total:e.count,"page-size":e.page_size},on:{"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"信息修改",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{attrs:{model:e.form,inline:""}},[a("el-form-item",{attrs:{label:"教师工号"}},[a("el-input",{ref:"number",attrs:{disabled:"",autocomplete:"off"},model:{value:e.form.number,callback:function(t){e.$set(e.form,"number",t)},expression:"form.number"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"教师姓名"}},[a("el-input",{ref:"name",attrs:{autocomplete:"off"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)],1),e._v(" "),a("el-form",{attrs:{model:e.form,inline:""}},[a("el-form-item",{attrs:{label:"所在学院"}},[a("el-input",{ref:"college",attrs:{autocomplete:"off"},model:{value:e.form.college,callback:function(t){e.$set(e.form,"college",t)},expression:"form.college"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"所带专业"}},[a("el-input",{ref:"major",attrs:{autocomplete:"off"},model:{value:e.form.major,callback:function(t){e.$set(e.form,"major",t)},expression:"form.major"}})],1)],1),e._v(" "),a("el-form",{attrs:{model:e.form,inline:""}},[a("el-form-item",{attrs:{label:"所带班级"}},[a("el-input",{ref:"class",attrs:{autocomplete:"off"},model:{value:e.form.class,callback:function(t){e.$set(e.form,"class",t)},expression:"form.class"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系方式"}},[a("el-input",{ref:"phone",attrs:{autocomplete:"off"},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1)],1),e._v(" "),a("el-form",{attrs:{model:e.form,inline:""}},[a("el-form-item",{attrs:{label:"方阵教官"}},[a("el-input",{ref:"master",attrs:{autocomplete:"off"},model:{value:e.form.master,callback:function(t){e.$set(e.form,"master",t)},expression:"form.master"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogFormVisible=!1,e.InfoUpdate()}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"增加信息",visible:e.dialogFormVisibleAdd},on:{"update:visible":function(t){e.dialogFormVisibleAdd=t}}},[a("el-form",{staticClass:"formStyle",attrs:{model:e.form,inline:""}},[a("el-form-item",{attrs:{label:"教师工号"}},[a("el-input",{ref:"numberAdd",attrs:{autocomplete:"off"},model:{value:e.form.numberAdd,callback:function(t){e.$set(e.form,"numberAdd",t)},expression:"form.numberAdd"}})],1),e._v(" "),a("el-form-item",{staticClass:"formItem",attrs:{label:"教师姓名"}},[a("el-input",{ref:"nameAdd",attrs:{autocomplete:"off"},model:{value:e.form.nameAdd,callback:function(t){e.$set(e.form,"nameAdd",t)},expression:"form.nameAdd"}})],1)],1),e._v(" "),a("el-form",{staticClass:"formStyle",attrs:{model:e.form,inline:""}},[a("el-form-item",{attrs:{label:"所在学院"}},[a("el-input",{ref:"collegeAdd",attrs:{autocomplete:"off"},model:{value:e.form.collegeAdd,callback:function(t){e.$set(e.form,"collegeAdd",t)},expression:"form.collegeAdd"}})],1),e._v(" "),a("el-form-item",{staticClass:"formItem",attrs:{label:"所带专业"}},[a("el-input",{ref:"majorAdd",attrs:{autocomplete:"off"},model:{value:e.form.majorAdd,callback:function(t){e.$set(e.form,"majorAdd",t)},expression:"form.majorAdd"}})],1)],1),e._v(" "),a("el-form",{staticClass:"formStyle",attrs:{model:e.form,inline:""}},[a("el-form-item",{attrs:{label:"所带班级"}},[a("el-input",{ref:"classAdd",attrs:{autocomplete:"off"},model:{value:e.form.classAdd,callback:function(t){e.$set(e.form,"classAdd",t)},expression:"form.classAdd"}})],1),e._v(" "),a("el-form-item",{staticClass:"formItem",attrs:{label:"联系方式"}},[a("el-input",{ref:"phoneAdd",attrs:{autocomplete:"off"},model:{value:e.form.phoneAdd,callback:function(t){e.$set(e.form,"phoneAdd",t)},expression:"form.phoneAdd"}})],1)],1),e._v(" "),a("el-form",{staticClass:"formStyle",attrs:{model:e.form,inline:""}},[a("el-form-item",{staticClass:"formItemLast",attrs:{label:"方阵教官"}},[a("el-input",{ref:"masterAdd",attrs:{autocomplete:"off"},model:{value:e.form.masterAdd,callback:function(t){e.$set(e.form,"masterAdd",t)},expression:"form.masterAdd"}})],1)],1),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.InfoAdd(),e.dialogFormVisibleAdd=!1}}},[e._v("添加")]),e._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:function(t){e.dialogFormVisibleAdd=!1}}},[e._v("取消")])],1),e._v(" "),a("el-table",{staticClass:"listTable",staticStyle:{width:"100%"},attrs:{data:e.allListData,id:"listTable"}},[a("el-table-column",{attrs:{prop:"number",label:"工号",align:"center",width:"100px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"姓名",align:"center",width:"100px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"college",label:"所在学院",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"major",label:"所带专业",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"class",label:"所带班级",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"phone",label:"联系方式",align:"center",width:"110px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"master",label:"教官",align:"center",width:"80px"}})],1)],1)},staticRenderFns:[]};var u=a("VU/8")(m,c,!1,function(e){a("xJxN")},null,null);t.default=u.exports},xJxN:function(e,t){}});
//# sourceMappingURL=12.18d95a57ac5f0c46d8ea.js.map
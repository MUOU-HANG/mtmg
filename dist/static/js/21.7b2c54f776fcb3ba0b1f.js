webpackJsonp([21],{XL66:function(e,t){},wPxm:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});a("zL8q");var l,r=a("t4zo"),o=a.n(r),s=a("uXZL"),n=a.n(s),i=(l=0,function(e,t){clearTimeout(l),l=setTimeout(e,t)}),c={inject:["reload"],data:function(){return{masterData:[],collegeData:[],majorData:[],classData:[],selectedOptions:[],dialogTableVisible:!1,dialogFormVisible:!1,dialogFormVisibleAdd:!1,searchValue:"",form:{number:"",name:"",collegeAdd:"",majorAdd:"",class:"",phone:"",teacher:"",search_number:""},formAdd:{numberAdd:"",nameAdd:"",collegeAdd:"",majorAdd:"",classAdd:"",phoneAdd:"",teacherAdd:""},count:1,page_size:6,currentPage:1,rules:{numberAdd:[{required:!0,message:"请输入学生学号",trigger:"blur"},{min:9,max:10,message:"请输入完整学号",trigger:"blur"}],nameAdd:[{required:!0,message:"请输入名字",trigger:"blur"}],majorAdd:[{required:!0,message:"请选择专业",trigger:"blur"}],collegeAdd:[{required:!0,message:"请选择学院",trigger:"blur"}],classAdd:[{required:!0,message:"请选择班级",trigger:"blur"}],teacherAdd:[{required:!0,message:"请输入教师姓名",trigger:"blur"}],phoneAdd:[{required:!0,message:"请输入手机号",trigger:"blur"}]}}},created:function(){this.getList(),this.allList(),this.getCollege()},watch:{searchValue:function(){var e=this;i(function(){e.getList(),e.getClass(),e.getMajor()},300)}},methods:{allList:function(){var e=this;this.$http.post("/api/user/allMasterList").then(function(t){e.allListData=t.data})},outExe:function(){var e=this;this.$confirm("是否导出教官信息表?","提示",{confirmButtonText:"确定导出",cancelButtonText:"取消",type:"warning"}).then(function(){e.exportExcel()}).catch(function(){})},exportExcel:function(){this.pagesize="30",this.currentPage="1",this.$nextTick(function(){var e=n.a.utils.table_to_book(document.querySelector("#listTable")),t=n.a.write(e,{bookType:"xlsx",bookSST:!0,type:"array"});try{o.a.saveAs(new Blob([t],{type:"application/octet-stream"}),"教官信息表.xlsx")}catch(e){"undefined"!=typeof console&&console.log(e,t)}return this.pagesize="10",t})},getList:function(){var e=this,t=this.searchValue;this.$http.post("/api/user/masterList",{number:t,begin:0,end:6},{}).then(function(a){e.masterData=a.data,e.$http.post("/api/user/masterCount",{number:t}).then(function(t){e.count=t.data})})},handleChange:function(e,t){this.form.number=t.number,this.form.name=t.name,this.form.collegeAdd=t.college,this.form.majorAdd=t.major,this.form.class=t.class,this.form.phone=t.phone,this.form.teacher=t.teacher},InfoUpdate:function(){var e=this,t=this.form.number,a=this.form.name,l=this.form.collegeAdd,r=this.form.majorAdd,o=this.form.class,s=this.form.phone,n=this.form.teacher;this.$http.post("/api/user/masterUpdate",{number:t,name:a,college:l,major:r,class:o,phone:s,teacher:n},{}).then(function(t){console.log(t),t?(e.$message({message:"修改成功",type:"info"}),e.reload()):e.$message({message:"修改失败",type:"warning"})})},InfoAdd:function(e){var t=this;this.$refs[e].validate(function(e){if(e){var a=t.$refs.numberAdd.value,l=t.$refs.nameAdd.value,r=t.$refs.collegeAdd.value,o=t.$refs.majorAdd.value,s=t.$refs.classAdd.value,n=t.$refs.phoneAdd.value,i=t.$refs.teacherAdd.value;t.$http.post("/api/user/masterAdd",{number:a,name:l,college:r,major:o,class:s,phone:n,teacher:i}).then(function(e){e.status?(t.$message({message:"增加成功",type:"success"}),dialogFormVisibleAdd=!1,t.reload()):t.$message({message:"增加失败",type:"warning"})})}})},handleDelete:function(e,t){var a=this;this.$confirm("删除将不可恢复，是否确定删除"+t.name+"的信息？","删除提醒",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.$http.post("/api/user/masterDel",{number:t.number}).then(function(e){e.status?(a.$message({message:"删除"+t.name+"信息成功",type:"success"}),a.reload()):a.$message({message:"删除"+t.name+"信息失败",type:"warning"})})}).catch(function(){})},handleCurrentChange:function(e){var t=this,a=this.$refs.search.value;this.$http.post("/api/user/masterList",{number:a,begin:6*e-6,end:6*e-1},{}).then(function(e){t.masterData=e.data}),console.log("当前页: "+e)},getCollege:function(){var e=this;this.$http.post("/api/user/getCollege").then(function(t){e.collegeData=t.data})},getMajor:function(){var e=this,t=this.form.collegeAdd;this.$http.post("/api/user/getMajor",{college:t}).then(function(t){e.majorData=t.data})},getClass:function(){var e=this,t=this.form.majorAdd;this.$http.post("/api/user/getClass",{major:t}).then(function(t){console.log(t),e.classData=t.data})}}},m={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"block"},[a("el-header",{staticClass:"master_stration"},[a("el-form",{attrs:{model:e.form,inline:""}},[a("ElFormItem",{attrs:{label:"输入学生学号："}},[a("el-input",{ref:"search",attrs:{placeholder:"请输入学生学号","suffix-icon":"el-icon-search"},model:{value:e.searchValue,callback:function(t){e.searchValue="string"==typeof t?t.trim():t},expression:"searchValue"}})],1),e._v(" "),a("el-button",{staticClass:"masterAdd",attrs:{type:"info",icon:"el-icon-circle-plus",round:"",plain:""},on:{click:function(t){e.dialogFormVisibleAdd=!0}}},[e._v("增加信息")]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"480px"},attrs:{icon:"el-icon-download",round:"",plain:"",type:"success"},on:{click:function(t){e.outExe()}}},[e._v("导出")])],1)],1),e._v(" "),a("el-table",{staticClass:"listTable",staticStyle:{width:"100%"},attrs:{data:e.masterData}},[a("el-table-column",{attrs:{prop:"number",label:"代号",align:"center",width:"100px",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"姓名",align:"center",width:"100px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"college",label:"所带学院",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"major",label:"所带专业",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"class",label:"所带班级",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"phone",label:"联系方式",align:"center",width:"110px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"teacher",label:"辅导员",align:"center",width:"80px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",[e._v("姓名: "+e._s(t.row.teacher))]),e._v(" "),a("p",[e._v("联系方式: "+e._s(t.row.teacherPhone))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("el-tag",{attrs:{size:"medium"}},[e._v(e._s(t.row.teacher))])],1)])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:"150px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",round:""},on:{click:function(a){e.dialogFormVisible=!0,e.handleChange(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger",round:""},on:{click:function(a){e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("div",{staticClass:"page"},[a("el-pagination",{attrs:{"hide-on-single-page":!0,"current-page":e.currentPage,layout:"total, prev, pager, next, jumper",total:e.count,"page-size":e.page_size},on:{"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"信息修改",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{attrs:{model:e.form,inline:""}},[a("el-form-item",{attrs:{label:"教官代号"}},[a("el-input",{ref:"number",attrs:{autocomplete:"off",disabled:""},model:{value:e.form.number,callback:function(t){e.$set(e.form,"number",t)},expression:"form.number"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"教官姓名"}},[a("el-input",{ref:"name",attrs:{autocomplete:"off"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"所带学院"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择学院",filterable:""},on:{change:function(t){e.getMajor()}},model:{value:e.form.collegeAdd,callback:function(t){e.$set(e.form,"collegeAdd","string"==typeof t?t.trim():t)},expression:"form.collegeAdd"}},e._l(e.collegeData,function(e){return a("el-option",{key:e.value,attrs:{label:e.college,value:e.college}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"所带专业"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择专业",filterable:""},on:{change:function(t){e.getClass()}},model:{value:e.form.majorAdd,callback:function(t){e.$set(e.form,"majorAdd","string"==typeof t?t.trim():t)},expression:"form.majorAdd"}},e._l(e.majorData,function(e){return a("el-option",{key:e.value,attrs:{label:e.major,value:e.major}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"所带班级"}},[a("el-select",{attrs:{filterable:""},model:{value:e.form.class,callback:function(t){e.$set(e.form,"class","string"==typeof t?t.trim():t)},expression:"form.class"}},e._l(e.classData,function(e){return a("el-option",{key:e.value,attrs:{label:e.class,value:e.class}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"联系方式"}},[a("el-input",{ref:"phone",attrs:{autocomplete:"off"},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"学生辅导员"}},[a("el-input",{ref:"teacher",attrs:{autocomplete:"off"},model:{value:e.form.teacher,callback:function(t){e.$set(e.form,"teacher",t)},expression:"form.teacher"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogFormVisible=!1,e.InfoUpdate()}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"增加信息",visible:e.dialogFormVisibleAdd},on:{"update:visible":function(t){e.dialogFormVisibleAdd=t}}},[a("el-form",{ref:"formAdd",attrs:{model:e.formAdd,inline:"",rules:e.rules}},[a("el-form-item",{attrs:{label:"教官代号",prop:"numberAdd"}},[a("el-input",{model:{value:e.form.numberAdd,callback:function(t){e.$set(e.form,"numberAdd",t)},expression:"form.numberAdd"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"教官姓名",prop:"nameAdd"}},[a("el-input",{model:{value:e.form.nameAdd,callback:function(t){e.$set(e.form,"nameAdd",t)},expression:"form.nameAdd"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"所带学院",prop:"collegeAdd"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择学院",filterable:""},on:{change:function(t){e.getMajor()}},model:{value:e.form.collegeAdd,callback:function(t){e.$set(e.form,"collegeAdd","string"==typeof t?t.trim():t)},expression:"form.collegeAdd"}},e._l(e.collegeData,function(e){return a("el-option",{key:e.value,attrs:{label:e.college,value:e.college}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"所带专业",prop:"majorAdd"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择专业",filterable:""},on:{change:function(t){e.getClass()}},model:{value:e.form.majorAdd,callback:function(t){e.$set(e.form,"majorAdd","string"==typeof t?t.trim():t)},expression:"form.majorAdd"}},e._l(e.majorData,function(e){return a("el-option",{key:e.value,attrs:{label:e.major,value:e.major}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"所带班级",prop:"classAdd"}},[a("el-select",{attrs:{filterable:""},model:{value:e.form.classAdd,callback:function(t){e.$set(e.form,"classAdd","string"==typeof t?t.trim():t)},expression:"form.classAdd"}},e._l(e.classData,function(e){return a("el-option",{key:e.value,attrs:{label:e.class,value:e.class}})}),1)],1),e._v(" "),a("el-form-item",{staticClass:"formItem",attrs:{label:"联系方式",prop:"phoneAdd"}},[a("el-input",{ref:"phoneAdd",attrs:{autocomplete:"off"},model:{value:e.form.phoneAdd,callback:function(t){e.$set(e.form,"phoneAdd",t)},expression:"form.phoneAdd"}})],1),e._v(" "),a("el-form-item",{staticClass:"formItemLast",attrs:{label:"学生辅导员",prop:"teacherAdd"}},[a("el-input",{ref:"teacherAdd",attrs:{autocomplete:"off"},model:{value:e.form.teacherAdd,callback:function(t){e.$set(e.form,"teacherAdd",t)},expression:"form.teacherAdd"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisibleAdd=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.InfoAdd("formAdd")}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-table",{staticClass:"listTable",staticStyle:{width:"100%"},attrs:{data:e.masterData,id:"listTable"}},[a("el-table-column",{attrs:{prop:"number",label:"代号",align:"center",width:"100px",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"姓名",align:"center",width:"100px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"college",label:"所带学院",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"major",label:"所带专业",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"class",label:"所带班级",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"phone",label:"联系方式",align:"center",width:"110px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"teacher",label:"辅导员",align:"center",width:"80px"}})],1)],1)},staticRenderFns:[]};var d=a("VU/8")(c,m,!1,function(e){a("XL66")},null,null);t.default=d.exports}});
//# sourceMappingURL=21.7b2c54f776fcb3ba0b1f.js.map
webpackJsonp([13],{YnhR:function(e,t){},rjHx:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});a("zL8q");var l,o=a("t4zo"),n=a.n(o),r=a("uXZL"),i=a.n(r),c=(l=0,function(e,t){clearTimeout(l),l=setTimeout(e,t)}),s={inject:["reload"],data:function(){return{allListData:[],companyData:[],dialogTableVisible:!1,dialogFormVisible:!1,dialogFormVisibleAdd:!1,searchValue:"",form:{clCode:"",clGrade:"",clName:"",diName:"",clRowName:"",tcName:"",maName:"",clMaxCount:"",search_number:""},count:"",page_size:6,currentPage:1}},created:function(){this.getList(),this.allList()},watch:{searchValue:function(){var e=this;c(function(){e.getList()},300)}},methods:{allList:function(){var e=this;this.$http.post("/api/user/allCompanyList").then(function(t){e.allListData=t.data})},outExe:function(){var e=this;this.$confirm("是否导出连排信息表?","提示",{confirmButtonText:"确定导出",cancelButtonText:"取消",type:"warning"}).then(function(){e.exportExcel()}).catch(function(){})},exportExcel:function(){this.pagesize="30",this.currentPage="1",this.$nextTick(function(){var e=i.a.utils.table_to_book(document.querySelector("#listTable")),t=i.a.write(e,{bookType:"xlsx",bookSST:!0,type:"array"});try{n.a.saveAs(new Blob([t],{type:"application/octet-stream"}),"连排信息表.xlsx")}catch(e){"undefined"!=typeof console&&console.log(e,t)}return this.pagesize="10",t})},getList:function(){var e=this,t=this.searchValue;this.$http.post("/api/user/companyList",{clName:t,begin:0,end:6},{}).then(function(a){e.companyData=a.data,e.$http.post("/api/user/companyCount",{clName:t}).then(function(t){e.count=t.data})})},handleChange:function(e,t){this.form.clCode=t.clCode,this.form.clGrade=t.clGrade,this.form.clName=t.clName,this.form.diName=t.diName,this.form.clRowName=t.clRowName,this.form.tcName=t.tcName,this.form.maName=t.maName,this.form.clMaxCount=t.clMaxCount},InfoUpdate:function(){var e=this,t=this.$refs.clCode.value,a=this.$refs.clGrade.value,l=this.$refs.clName.value,o=this.$refs.diName.value,n=this.$refs.clRowName.value,r=this.$refs.tcName.value,i=this.$refs.maName.value,c=this.$refs.clMaxCount.value;this.$http.post("/api/user/companyUpdate",{clCode:t,clGrade:a,clName:l,diName:o,clRowName:n,tcName:r,maName:i,clMaxCount:c},{}).then(function(t){console.log(t),t?(e.$message({message:"修改成功",type:"info"}),e.reload()):e.$message({message:"修改失败",type:"warning"})})},InfoAdd:function(){var e=this,t=this.$refs.clCodeAdd.value,a=this.$refs.clGradeAdd.value,l=this.$refs.clNameAdd.value,o=this.$refs.diNameAdd.value,n=this.$refs.clRowNameAdd.value,r=this.$refs.tcNameAdd.value,i=this.$refs.maNameAdd.value,c=this.$refs.clMaxCountAdd.value;this.$http.post("/api/user/companyAdd",{clCode:t,clGrade:a,clName:l,diName:o,clRowName:n,tcName:r,maName:i,clMaxCount:c}).then(function(t){t.status?(e.$message({message:"增加成功",type:"success"}),e.reload()):e.$message({message:"增加失败",type:"warning"})})},handleDelete:function(e,t){var a=this;this.$confirm("删除将不可恢复，是否确定删除"+t.clName+"的信息？","删除提醒",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.$http.post("/api/user/companyDel",{clCode:t.clCode}).then(function(e){e.status?(a.$message({message:"删除"+t.clName+"信息成功",type:"success"}),a.reload()):a.$message({message:"删除"+t.clName+"信息失败",type:"warning"})})}).catch(function(){})},handleCurrentChange:function(e){var t=this,a=this.$refs.search.value;this.$http.post("/api/user/companyList",{number:a,begin:6*e-6,end:6*e-1},{}).then(function(e){t.companyData=e.data}),console.log("当前页: "+e)}}},m={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"block"},[a("el-header",{staticClass:"company_stration"},[a("el-form",{attrs:{model:e.form,inline:""}},[a("ElFormItem",{attrs:{label:"输入查询班级："}},[a("el-input",{ref:"search",attrs:{placeholder:"请输入查询班级","suffix-icon":"el-icon-search"},model:{value:e.searchValue,callback:function(t){e.searchValue="string"==typeof t?t.trim():t},expression:"searchValue"}})],1),e._v(" "),a("el-button",{staticClass:"companyAdd",attrs:{type:"info",icon:"el-icon-circle-plus",round:"",plain:""},on:{click:function(t){e.dialogFormVisibleAdd=!0}}},[e._v("增加信息")]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"480px"},attrs:{icon:"el-icon-download",round:"",plain:"",type:"success"},on:{click:function(t){e.outExe()}}},[e._v("导出")])],1)],1),e._v(" "),a("el-table",{staticClass:"listTable",staticStyle:{width:"100%"},attrs:{data:e.companyData}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{prop:"clCode",label:"班级编号",align:"center",width:"100px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"clGrade",label:"年级",align:"center",width:"50px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"clName",label:"班级",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"diName",label:"系别",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"clRowName",label:"连排名称",align:"center",width:"90px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"tcName",label:"辅导员",align:"center",width:"90px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"maName",label:"教官",align:"center",width:"90px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"clMaxCount",label:"剩余名额/班级容量",align:"center",width:"90px"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:"150px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",round:""},on:{click:function(a){e.dialogFormVisible=!0,e.handleChange(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger",round:""},on:{click:function(a){e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("div",{staticClass:"page"},[a("el-pagination",{attrs:{"hide-on-single-page":!0,"current-page":e.currentPage,layout:"total, prev, pager, next, jumper",total:e.count,"page-size":e.page_size},on:{"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"信息修改",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{attrs:{model:e.form,inline:""}},[a("el-form-item",{attrs:{label:"班级编号"}},[a("el-input",{ref:"clCode",attrs:{autocomplete:"off",disabled:""},model:{value:e.form.clCode,callback:function(t){e.$set(e.form,"clCode",t)},expression:"form.clCode"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"年级"}},[a("el-input",{ref:"clGrade",attrs:{autocomplete:"off"},model:{value:e.form.clGrade,callback:function(t){e.$set(e.form,"clGrade",t)},expression:"form.clGrade"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"班级"}},[a("el-input",{ref:"clName",attrs:{autocomplete:"off"},model:{value:e.form.clName,callback:function(t){e.$set(e.form,"clName",t)},expression:"form.clName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"系别/连队"}},[a("el-input",{ref:"diName",attrs:{autocomplete:"off"},model:{value:e.form.diName,callback:function(t){e.$set(e.form,"diName",t)},expression:"form.diName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"排名称"}},[a("el-input",{ref:"clRowName",attrs:{autocomplete:"off"},model:{value:e.form.clRowName,callback:function(t){e.$set(e.form,"clRowName",t)},expression:"form.clRowName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"辅导员"}},[a("el-input",{ref:"tcName",attrs:{autocomplete:"off"},model:{value:e.form.tcName,callback:function(t){e.$set(e.form,"tcName",t)},expression:"form.tcName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"教官"}},[a("el-input",{ref:"maName",attrs:{autocomplete:"off"},model:{value:e.form.maName,callback:function(t){e.$set(e.form,"maName",t)},expression:"form.maName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"剩余名额"}},[a("el-input",{ref:"clMaxCount",attrs:{autocomplete:"off"},model:{value:e.form.clMaxCount,callback:function(t){e.$set(e.form,"clMaxCount",t)},expression:"form.clMaxCount"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogFormVisible=!1,e.InfoUpdate()}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"增加信息",visible:e.dialogFormVisibleAdd},on:{"update:visible":function(t){e.dialogFormVisibleAdd=t}}},[a("el-form",{attrs:{model:e.form,inline:""}},[a("el-form-item",{attrs:{label:"班级编号"}},[a("el-input",{ref:"clCodeAdd",attrs:{autocomplete:"off"},model:{value:e.form.clCode,callback:function(t){e.$set(e.form,"clCode",t)},expression:"form.clCode"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"年级"}},[a("el-input",{ref:"clGradeAdd",attrs:{autocomplete:"off"},model:{value:e.form.clGrade,callback:function(t){e.$set(e.form,"clGrade",t)},expression:"form.clGrade"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"班级"}},[a("el-input",{ref:"clNameAdd",attrs:{autocomplete:"off"},model:{value:e.form.clName,callback:function(t){e.$set(e.form,"clName",t)},expression:"form.clName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"系别/连队"}},[a("el-input",{ref:"diNameAdd",attrs:{autocomplete:"off"},model:{value:e.form.diName,callback:function(t){e.$set(e.form,"diName",t)},expression:"form.diName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"排名称"}},[a("el-input",{ref:"clRowNameAdd",attrs:{autocomplete:"off"},model:{value:e.form.clRowName,callback:function(t){e.$set(e.form,"clRowName",t)},expression:"form.clRowName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"辅导员"}},[a("el-input",{ref:"tcNameAdd",attrs:{autocomplete:"off"},model:{value:e.form.tcName,callback:function(t){e.$set(e.form,"tcName",t)},expression:"form.tcName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"教官"}},[a("el-input",{ref:"maNameAdd",attrs:{autocomplete:"off"},model:{value:e.form.maName,callback:function(t){e.$set(e.form,"maName",t)},expression:"form.maName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"剩余人数"}},[a("el-input",{ref:"clMaxCountAdd",attrs:{autocomplete:"off"},model:{value:e.form.clMaxCount,callback:function(t){e.$set(e.form,"clMaxCount",t)},expression:"form.clMaxCount"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisibleAdd=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.InfoAdd(),e.dialogFormVisibleAdd=!1}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-table",{staticClass:"listTable",staticStyle:{width:"100%"},attrs:{data:e.allListData,id:"listTable"}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{prop:"clCode",label:"班级编号",align:"center",width:"100px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"clGrade",label:"年级",align:"center",width:"50px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"clName",label:"班级",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"diName",label:"系别",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"clRowName",label:"连排名称",align:"center",width:"90px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"tcName",label:"辅导员",align:"center",width:"90px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"maName",label:"教官",align:"center",width:"90px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"clMaxCount",label:"剩余名额",align:"center",width:"90px"}})],1)],1)},staticRenderFns:[]};var u=a("VU/8")(s,m,!1,function(e){a("YnhR")},null,null);t.default=u.exports}});
//# sourceMappingURL=13.1385999b0a757e1b1427.js.map
webpackJsonp([20],{kkN2:function(e,t){},zpvh:function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});l("zL8q");var a,o=l("t4zo"),r=l.n(o),s=l("uXZL"),n=l.n(s),i=(a=0,function(e,t){clearTimeout(a),a=setTimeout(e,t)}),c={inject:["reload"],data:function(){return{allListData:[],stuData:[],classData:[],majorData:[],collegeData:[],selectedOptions:[],dialogTableVisible:!1,dialogFormVisible:!1,dialogFormVisibleAdd:!1,searchValue:"",form:{number:"",name:"",college:"",sex:"",class:"",phone:"",teacher:"",search_number:""},formAdd:{numberAdd:"",nameAdd:"",collegeAdd:"",sexAdd:"",classAdd:"",phoneAdd:"",teacherAdd:"",search_number:""},count:1,page_size:6,currentPage:1,rules:{numberAdd:[{required:!0,message:"请输入学生学号",trigger:"blur"},{min:9,max:10,message:"请输入完整学号",trigger:"blur"}],nameAdd:[{required:!0,message:"请输入名字",trigger:"blur"}],sexAdd:[{required:!0,message:"请选择性别",trigger:"blur"}],collegeAdd:[{required:!0,message:"请输入学院",trigger:"blur"}],classAdd:[{required:!0,message:"请输入班级",trigger:"blur"}],teacherAdd:[{required:!0,message:"请输入教师姓名",trigger:"blur"}],phoneAdd:[{required:!0,message:"请输入手机号",trigger:"blur"}]}}},created:function(){this.getList(),this.getCollege(),this.allList()},watch:{searchValue:function(){var e=this;i(function(){e.getList(),e.getClass(),e.getMajor()},300)}},methods:{allList:function(){var e=this;this.$http.post("/api/user/allStuList").then(function(t){e.allListData=t.data,console.log(t.data)})},outExe:function(){var e=this;this.$confirm("是否导出学生信息表?","提示",{confirmButtonText:"确定导出",cancelButtonText:"取消",type:"warning"}).then(function(){e.exportExcel()}).catch(function(){})},exportExcel:function(){this.pagesize="30",this.currentPage="1",this.$nextTick(function(){var e=n.a.utils.table_to_book(document.querySelector("#listTable")),t=n.a.write(e,{bookType:"xlsx",bookSST:!0,type:"array"});try{r.a.saveAs(new Blob([t],{type:"application/octet-stream"}),"学生信息表.xlsx")}catch(e){"undefined"!=typeof console&&console.log(e,t)}return this.pagesize="10",t})},getList:function(){var e=this,t=this.searchValue;this.$http.post("/api/user/stuList",{number:t,begin:0,end:6},{}).then(function(t){e.stuData=t.data}),this.$http.post("/api/user/count",{number:t}).then(function(t){e.count=t.data})},handleChange:function(e,t){this.form.number=t.number,this.form.name=t.name,this.form.college=t.college,this.form.sex=t.sex,this.form.class=t.class,this.form.phone=t.phone,this.form.teacher=t.teacher},InfoUpdate:function(){var e=this,t=this.form.number,l=this.form.name,a=this.form.college,o=this.form.sex,r=this.form.class,s=this.form.phone,n=this.form.teacher;this.$http.post("api/user/stuList",{number:t,begin:0,end:6}).then(function(i){var c=i.data[0].cloths,d=i.data[0].shoes,m=i.data[0].reason;e.$http.post("/api/user/stuUpdate",{number:t,name:l,college:a,sex:o,class:r,phone:s,teacher:n,cloths:c,shoes:d,reason:m},{}).then(function(t){console.log(t),t?(e.$message({message:"修改成功",type:"info"}),e.reload()):e.$message({message:"修改失败",type:"warning"})})})},InfoAdd:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;var l=t.form.numberAdd,a=t.form.nameAdd,o=t.form.collegeAdd,r=t.form.sexAdd,s=t.form.classAdd,n=t.form.phoneAdd,i=t.form.teacherAdd;t.$http.post("/api/user/stuAdd",{number:l,name:a,college:o,sex:r,class:s,phone:n,teacher:i}).then(function(e){e.status?(t.$message({message:"增加成功",type:"success"}),t.reload()):t.$message({message:"增加失败",type:"warning"})}),t.dialogFormVisibleAdd=!1})},handleDelete:function(e,t){var l=this;this.$confirm("删除将不可恢复，是否确定删除"+t.name+"的信息？","删除提醒",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){l.$http.post("/api/user/stuDel",{number:t.number}).then(function(e){e.status?(l.$message({message:"删除"+t.name+"信息成功",type:"success"}),l.reload()):l.$message({message:"删除"+t.name+"信息失败",type:"warning"})})}).catch(function(){})},handleCurrentChange:function(e){var t=this,l=this.$refs.search.value;this.$http.post("/api/user/stuList",{number:l,begin:6*e-6,end:6},{}).then(function(e){t.stuData=e.data})},getCollege:function(){var e=this;this.$http.post("/api/user/getCollege").then(function(t){e.collegeData=t.data})},getMajor:function(){var e=this,t=this.form.collegeAdd;this.$http.post("/api/user/getMajor",{college:t}).then(function(t){e.majorData=t.data})},getClass:function(){var e=this,t=this.form.majorAdd;this.$http.post("/api/user/getClass",{major:t}).then(function(t){e.classData=t.data})}}},d={render:function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"block"},[l("el-header",{staticClass:"stu_stration"},[l("el-form",{attrs:{model:e.form,inline:""}},[l("ElFormItem",{attrs:{label:"输入学生学号："}},[l("el-input",{ref:"search",attrs:{placeholder:"请输入学生学号","suffix-icon":"el-icon-search"},model:{value:e.searchValue,callback:function(t){e.searchValue="string"==typeof t?t.trim():t},expression:"searchValue"}})],1),e._v(" "),l("el-button",{staticClass:"stuAdd",attrs:{type:"info",icon:"el-icon-circle-plus",round:"",plain:""},on:{click:function(t){e.dialogFormVisibleAdd=!0}}},[e._v("增加信息")]),e._v(" "),l("el-button",{staticStyle:{"margin-left":"480px"},attrs:{icon:"el-icon-download",round:"",plain:"",type:"success"},on:{click:function(t){e.outExe()}}},[e._v("导出")])],1)],1),e._v(" "),l("el-table",{staticClass:"listTable",staticStyle:{width:"100%"},attrs:{data:e.stuData}},[l("el-table-column",{attrs:{prop:"number",label:"学号",align:"center",width:"100px",sortable:""}}),e._v(" "),l("el-table-column",{attrs:{prop:"name",label:"姓名",align:"center",width:"70px"}}),e._v(" "),l("el-table-column",{attrs:{prop:"sex",label:"性别",align:"center",width:"50px"}}),e._v(" "),l("el-table-column",{attrs:{prop:"college",label:"学院",align:"center"}}),e._v(" "),l("el-table-column",{attrs:{prop:"class",label:"班级",align:"center"}}),e._v(" "),l("el-table-column",{attrs:{prop:"phone",label:"联系方式",align:"center",width:"110px"}}),e._v(" "),l("el-table-column",{attrs:{prop:"teacher",label:"辅导员",align:"center",width:"80px"}}),e._v(" "),l("el-table-column",{attrs:{prop:"train",label:"是否军训",align:"center",width:"50px"}}),e._v(" "),l("el-table-column",{attrs:{prop:"reason",label:"备注",align:"center",width:"120px"}}),e._v(" "),l("el-table-column",{attrs:{label:"操作",align:"center",width:"150px"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-button",{attrs:{size:"mini",round:""},on:{click:function(l){e.dialogFormVisible=!0,e.handleChange(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),l("el-button",{attrs:{size:"mini",type:"danger",round:""},on:{click:function(l){e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),l("div",{staticClass:"page"},[l("el-pagination",{attrs:{"hide-on-single-page":!0,"current-page":e.currentPage,layout:"total, prev, pager, next, jumper",total:e.count,"page-size":e.page_size},on:{"current-change":e.handleCurrentChange}})],1),e._v(" "),l("el-dialog",{attrs:{title:"修改信息",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[l("el-form",{attrs:{model:e.form,inline:""}},[l("el-form-item",{attrs:{label:"学生学号"}},[l("el-input",{ref:"number",attrs:{autocomplete:"off",disabled:""},model:{value:e.form.number,callback:function(t){e.$set(e.form,"number",t)},expression:"form.number"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"学生姓名"}},[l("el-input",{ref:"name",attrs:{autocomplete:"off"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)],1),e._v(" "),l("el-form",{attrs:{model:e.form,inline:""}},[l("el-form-item",{attrs:{label:"学生学院"}},[l("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择学院",filterable:""},on:{change:function(t){e.getClass()}},model:{value:e.form.college,callback:function(t){e.$set(e.form,"college","string"==typeof t?t.trim():t)},expression:"form.college"}},e._l(e.collegeData,function(e){return l("el-option",{key:e.value,attrs:{label:e.college,value:e.college}})}),1)],1),e._v(" "),l("el-form-item",{attrs:{label:"学生班级"}},[l("el-select",{attrs:{filterable:""},model:{value:e.form.class,callback:function(t){e.$set(e.form,"class","string"==typeof t?t.trim():t)},expression:"form.class"}},e._l(e.classData,function(e){return l("el-option",{key:e.value,attrs:{label:e.class,value:e.class}})}),1)],1)],1),e._v(" "),l("el-form",{attrs:{model:e.form,inline:""}},[l("el-form-item",{attrs:{label:"学生性别"}},[l("el-radio-group",{staticStyle:{width:"205px"},model:{value:e.form.sex,callback:function(t){e.$set(e.form,"sex",t)},expression:"form.sex"}},[l("ElRadio",{attrs:{label:"男"}}),e._v(" "),l("ElRadio",{attrs:{label:"女"}})],1)],1),e._v(" "),l("el-form-item",{attrs:{label:"联系方式"}},[l("el-input",{ref:"phone",attrs:{autocomplete:"off"},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1)],1),e._v(" "),l("el-form",{attrs:{model:e.form,inline:""}},[l("el-form-item",{attrs:{label:"学生辅导员"}},[l("el-input",{ref:"teacher",attrs:{autocomplete:"off"},model:{value:e.form.teacher,callback:function(t){e.$set(e.form,"teacher",t)},expression:"form.teacher"}})],1)],1),e._v(" "),l("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),l("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogFormVisible=!1,e.InfoUpdate()}}},[e._v("确 定")])],1)],1),e._v(" "),l("el-dialog",{attrs:{title:"增加信息",visible:e.dialogFormVisibleAdd},on:{"update:visible":function(t){e.dialogFormVisibleAdd=t}}},[l("el-form",{ref:"formAdd",attrs:{model:e.formAdd,inline:"",rules:e.rules}},[l("el-form-item",{attrs:{label:"学生学号",prop:"numberAdd"}},[l("el-input",{ref:"numberAdd",attrs:{autocomplete:"off"},model:{value:e.form.numberAdd,callback:function(t){e.$set(e.form,"numberAdd",t)},expression:"form.numberAdd"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"学生姓名",prop:"nameAdd"}},[l("el-input",{ref:"nameAdd",attrs:{autocomplete:"off"},model:{value:e.form.nameAdd,callback:function(t){e.$set(e.form,"nameAdd",t)},expression:"form.nameAdd"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"学生学院",prop:"collegeAdd"}},[l("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择学院",filterable:""},on:{change:function(t){e.getMajor()}},model:{value:e.form.collegeAdd,callback:function(t){e.$set(e.form,"collegeAdd","string"==typeof t?t.trim():t)},expression:"form.collegeAdd"}},e._l(e.collegeData,function(e){return l("el-option",{key:e.value,attrs:{label:e.college,value:e.college}})}),1)],1),e._v(" "),l("el-form-item",{attrs:{label:"学生专业",prop:"classAdd"}},[l("el-select",{attrs:{filterable:""},on:{change:function(t){e.getClass()}},model:{value:e.form.majorAdd,callback:function(t){e.$set(e.form,"majorAdd","string"==typeof t?t.trim():t)},expression:"form.majorAdd"}},e._l(e.majorData,function(e){return l("el-option",{key:e.value,attrs:{label:e.major,value:e.major}})}),1)],1),e._v(" "),l("el-form-item",{attrs:{label:"学生班级",prop:"classAdd"}},[l("el-select",{attrs:{filterable:""},on:{change:function(t){e.getClass()}},model:{value:e.form.classAdd,callback:function(t){e.$set(e.form,"classAdd","string"==typeof t?t.trim():t)},expression:"form.classAdd"}},e._l(e.classData,function(e){return l("el-option",{key:e.value,attrs:{label:e.class,value:e.class}})}),1)],1),e._v(" "),l("el-form-item",{attrs:{label:"学生性别",prop:"sexAdd"}},[l("el-radio-group",{staticStyle:{width:"205px"},model:{value:e.form.sexAdd,callback:function(t){e.$set(e.form,"sexAdd",t)},expression:"form.sexAdd"}},[l("ElRadio",{attrs:{label:"男"}}),e._v(" "),l("ElRadio",{attrs:{label:"女"}})],1)],1),e._v(" "),l("el-form-item",{attrs:{label:"联系方式",prop:"phoneAdd"}},[l("el-input",{ref:"phoneAdd",attrs:{autocomplete:"off"},model:{value:e.form.phoneAdd,callback:function(t){e.$set(e.form,"phoneAdd",t)},expression:"form.phoneAdd"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"学生辅导员",prop:"teacherAdd"}},[l("el-input",{ref:"teacherAdd",attrs:{autocomplete:"off"},model:{value:e.form.teacherAdd,callback:function(t){e.$set(e.form,"teacherAdd",t)},expression:"form.teacherAdd"}})],1)],1),e._v(" "),l("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:function(t){e.dialogFormVisibleAdd=!1}}},[e._v("取 消")]),e._v(" "),l("el-button",{attrs:{type:"primary"},on:{click:function(t){e.InfoAdd("formAdd")}}},[e._v("确 定")])],1)],1),e._v(" "),l("el-table",{staticClass:"listTable",staticStyle:{width:"100%"},attrs:{data:e.allListData,id:"listTable"}},[l("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),l("el-table-column",{attrs:{prop:"number",label:"学号",align:"center",width:"100px",sortable:""}}),e._v(" "),l("el-table-column",{attrs:{prop:"name",label:"姓名",align:"center",width:"100px"}}),e._v(" "),l("el-table-column",{attrs:{prop:"sex",label:"性别",align:"center",width:"80px"}}),e._v(" "),l("el-table-column",{attrs:{prop:"college",label:"学院",align:"center"}}),e._v(" "),l("el-table-column",{attrs:{prop:"class",label:"班级",align:"center"}}),e._v(" "),l("el-table-column",{attrs:{prop:"phone",label:"联系方式",align:"center",width:"110px"}}),e._v(" "),l("el-table-column",{attrs:{prop:"teacher",label:"辅导员",align:"center",width:"80px"}}),e._v(" "),l("el-table-column",{attrs:{prop:"cloths",label:"军训服",align:"center",width:"80px"}}),e._v(" "),l("el-table-column",{attrs:{prop:"shoes",label:"军训鞋",align:"center",width:"80px"}}),e._v(" "),l("el-table-column",{attrs:{prop:"train",label:"是否军训",align:"center",width:"50px"}}),e._v(" "),l("el-table-column",{attrs:{prop:"reason",label:"备注",align:"center",width:"120px"}})],1)],1)},staticRenderFns:[]};var m=l("VU/8")(c,d,!1,function(e){l("kkN2")},null,null);t.default=m.exports}});
//# sourceMappingURL=20.c8a31f3701112a5b887b.js.map
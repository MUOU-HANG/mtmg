webpackJsonp([1],{Bend:function(e,s,t){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a={inject:["reload"],data:function(){var e=this;return{ruleForm:{},activeName:"first",loading:!0,baseUrl:Object({NODE_ENV:"production",mock:!1,API_HOST:/api/}).BASE_API,userlist:{username:"",phone:"",email:"",full_name:""},formLabelWidth:"80px",rules:{phone:[{required:!0,message:"请输入电话号码"},{pattern:/^(13[0-9]|14[5|7]|15[0|1|2|3|5|6|7|8|9]|18[0|1|2|3|5|6|7|8|9])\d{8}$/,message:"手机格式不对"}],email:[{required:!0,message:"请输入电子邮箱"},{pattern:/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+((\.[a-zA-Z0-9_-]{2,3}){1,2})$/,message:"请输入有效的邮箱"}],pass:[{required:!0,trigger:"blur",message:"请输入密码"}],newpass:[{validator:function(s,t,a){""===t?a(new Error("请输入密码")):(""!==e.ruleForm.checknewpass&&e.$refs.ruleForm.validateField("checknewpass"),a())},trigger:"blur"}],checknewpass:[{validator:function(s,t,a){""===t?a(new Error("请再次输入密码")):t!==e.ruleForm.newpass?a(new Error("两次输入密码不一致!")):a()},trigger:"blur"}]}}},created:function(){this.getUser()},methods:{getUser:function(){var e=this;this.$http.post("/api/user/login",{userName:sessionStorage.getItem("account")}).then(function(s){e.userlist.username=s.data[0].userName,e.userlist.phone=s.data[0].userPhone,e.userlist.email=s.data[0].userEmail,e.userlist.full_name=s.data[0].userType})},handleClick:function(e,s){console.log(e,s)},submitForm:function(){var e=this;this.$http.post("/api/user/passUpdate",{userName:sessionStorage.getItem("account"),userPass:this.ruleForm.newpass}).then(function(s){200==s.status?(e.$message({message:"保存成功",type:"success"}),e.reload()):e.$message({message:"修改失败"+s.message,type:"error"})})},EditorUserClick:function(){var e=this;this.$refs.EditorUserForms.validate(function(s){s&&e.$http.post("/api/user/userUpdate",{userName:e.userlist.username,userPhone:e.userlist.phone,userEmail:e.userlist.email}).then(function(s){200==s.status?(e.$message({message:"编辑成功",type:"success"}),e.reload()):e.$message({message:"修改失败"+s.message,type:"error"})})})}}},r={render:function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"all-container"},[t("div",{staticClass:"all-container-padding bg"},[t("el-tabs",{staticClass:"infoBox",on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(s){e.activeName=s},expression:"activeName"}},[t("el-tab-pane",{attrs:{label:"基本信息",name:"first"}},[t("el-form",{ref:"EditorUserForms",attrs:{model:e.userlist,rules:e.rules}},[t("el-form-item",{attrs:{label:"用户名",prop:"username","label-width":e.formLabelWidth}},[t("el-col",{attrs:{span:20}},[t("el-input",{attrs:{disabled:""},model:{value:e.userlist.username,callback:function(s){e.$set(e.userlist,"username",s)},expression:"userlist.username"}})],1)],1),e._v(" "),t("el-form-item",{attrs:{label:"电话",prop:"phone","label-width":e.formLabelWidth}},[t("el-col",{attrs:{span:20}},[t("el-input",{attrs:{placeholder:"请输入电话"},model:{value:e.userlist.phone,callback:function(s){e.$set(e.userlist,"phone",s)},expression:"userlist.phone"}})],1)],1),e._v(" "),t("el-form-item",{attrs:{label:"邮箱",prop:"email","label-width":e.formLabelWidth}},[t("el-col",{attrs:{span:20}},[t("el-input",{attrs:{placeholder:"请输入邮箱"},model:{value:e.userlist.email,callback:function(s){e.$set(e.userlist,"email",s)},expression:"userlist.email"}})],1)],1),e._v(" "),t("el-form-item",{attrs:{label:"用户角色",prop:"full_name","label-width":e.formLabelWidth}},[t("el-col",{attrs:{span:20}},[t("el-input",{attrs:{disabled:""},model:{value:e.userlist.full_name,callback:function(s){e.$set(e.userlist,"full_name",s)},expression:"userlist.full_name"}})],1)],1)],1),e._v(" "),t("div",{staticClass:"grid-content bg-purple"},[t("el-button",{staticStyle:{"margin-left":"150px"},attrs:{type:"primary"},on:{click:function(s){e.EditorUserClick("userlist")}}},[e._v("保存")])],1)],1),e._v(" "),t("el-tab-pane",{attrs:{label:"修改密码",name:"second"}},[t("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules}},[t("el-form-item",{attrs:{label:"原密码",prop:"pass","label-width":e.formLabelWidth}},[t("el-col",{attrs:{span:20}},[t("el-input",{attrs:{placeholder:"请输入原密码",type:"password"},model:{value:e.ruleForm.pass,callback:function(s){e.$set(e.ruleForm,"pass",s)},expression:"ruleForm.pass"}})],1)],1),e._v(" "),t("el-form-item",{attrs:{label:"新密码",prop:"newpass","label-width":e.formLabelWidth}},[t("el-col",{attrs:{span:20}},[t("el-input",{attrs:{placeholder:"请输入新密码",id:"newkey",type:"password"},model:{value:e.ruleForm.newpass,callback:function(s){e.$set(e.ruleForm,"newpass",s)},expression:"ruleForm.newpass"}})],1)],1),e._v(" "),t("el-form-item",{attrs:{label:"重复新密码",prop:"checknewpass","label-width":e.formLabelWidth}},[t("el-col",{attrs:{span:20}},[t("el-input",{attrs:{placeholder:"请再次输入新密码",id:"newkey1",type:"password"},model:{value:e.ruleForm.checknewpass,callback:function(s){e.$set(e.ruleForm,"checknewpass",s)},expression:"ruleForm.checknewpass"}})],1)],1)],1),e._v(" "),t("div",{staticClass:"grid-content bg-purple"},[t("el-button",{attrs:{type:"primary"},on:{click:function(s){e.submitForm()}}},[e._v("保存")])],1)],1)],1)],1)])},staticRenderFns:[]};var l=t("VU/8")(a,r,!1,function(e){t("qipz")},null,null);s.default=l.exports},qipz:function(e,s){}});
//# sourceMappingURL=1.4cdcb5066cb49344f4c7.js.map